# OUT :
# REQ : Stardog running: 1. on port  5820
#       2. with --disable-security option during start
# SRC :
# NOTE:
# TODO:
###############################################################################
library(SPARQL)
# Query StardogTriple Store ----
endpoint <- "http://localhost:5820/CTDasRDF-R/query"
queryOnt = paste0("
# PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
# PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?x = cdiscpilot01:Person_1
END ?y
VIA study:participatesIn
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
# Query StardogTriple Store ----
endpoint <- "http://localhost:5820/CTDasRDFOnt/query"
queryOnt = paste0("
# PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
# PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?x = cdiscpilot01:Person_1
END ?y
VIA study:participatesIn
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?x = cdiscpilot01:Person_1
END ?y
VIA study:participatesIn
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
resultsDF <- qd$results
resultsDF
View(resultsDF)
View(resultsDF)
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
resultsDF <- qd$results
resultsDF
View(resultsDF)
View(resultsDF)
queryOnt = paste0("
#PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
#PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
queryOnt = paste0("
#PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
#PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01:", "<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
qd <- SPARQL(endpoint, queryOnt, ns=prefix)
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01:", "<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
# qd <- SPARQL(endpoint, queryOnt, ns=prefix)
qd <- SPARQL(endpoint, queryOnt)
resultsDF <- resultsDF[complete.cases(resultsDF), ]
View(resultsDF)
View(resultsDF)
resultsDF <- resultsDF[, c("s", "p", "o")]   # remove o.l, s.l
head(resultsDF)
?unique
resultsDF <- unique(resultsDF)
View(resultsDF)
View(resultsDF)
resultsDF <- resultsDF[, c("s", "p", "o")]   # remove o.l, s.l
resultsDF <- unique(resultsDF)  # Remove dupes
resultsDF <- resultsDF[with(resultsDF, order(s,p,o)), ]  # Sort
View(resultsDF)
###############################################################################
# FILE: Stardog-SPARQL-Simple.R
# DESC: Simple query to Stardog using SPARQL pkg
# SRC :
# IN  : triplestore database CTDasRDF-R
# OUT :
# REQ : Stardog running: 1. on port  5820
#       2. with --disable-security option during start
# SRC :
# NOTE:
# TODO:
###############################################################################
library(SPARQL)
# Query StardogTriple Store ----
endpoint <- "http://localhost:5820/CTDasRDFOnt/query"
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01:", "<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
# qd <- SPARQL(endpoint, queryOnt, ns=prefix)
qd <- SPARQL(endpoint, queryOnt)
resultsDF <- qd$results
# Post query processing
resultsDF <- resultsDF[complete.cases(resultsDF), ]  # remove blank rows.
resultsDF <- resultsDF[, c("s", "p", "o")]   # remove o.l, s.l
resultsDF <- unique(resultsDF)  # Remove dupes
View(resultsDF)
View(resultsDF)
View(resultsDF)
View(resultsDF)
resultsDF$s <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#", "cdiscpilot01:", resultsDF$s)
head(resultsDF)
# Remove the trailing >
ttlRelations <- gsub(">", "", ttlRelations)
# Remove the trailing >
ttlRelations <- gsub(">", "", ttlRelations)
resultsDF <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF)
###############################################################################
# FILE: Stardog-SPARQL-Simple.R
# DESC: Simple query to Stardog using SPARQL pkg
# SRC :
# IN  : triplestore database CTDasRDF-R
# OUT :
# REQ : Stardog running: 1. on port  5820
#       2. with --disable-security option during start
# SRC :
# NOTE:
# TODO:
###############################################################################
library(SPARQL)
# Query StardogTriple Store ----
endpoint <- "http://localhost:5820/CTDasRDFOnt/query"
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01:", "<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
# qd <- SPARQL(endpoint, queryOnt, ns=prefix)
qd <- SPARQL(endpoint, queryOnt)
resultsDF <- qd$results
# Post query processing
resultsDF <- resultsDF[complete.cases(resultsDF), ]  # remove blank rows.
resultsDF <- resultsDF[, c("s", "p", "o")]   # remove o.l, s.l
resultsDF <- unique(resultsDF)  # Remove dupes
# Create a function for this:
resultsDF$s <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$s)
resultsDF$s <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$s)
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$p)
# predicates
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$p)
resultsDF$p <- gsub("http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$p)
resultsDF$s <- gsub("https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$p)
resultsDF$p <- gsub(">", "", resultsDF$p)
###############################################################################
# FILE: Stardog-SPARQL-Simple.R
# DESC: Simple query to Stardog using SPARQL pkg
# SRC :
# IN  : triplestore database CTDasRDF-R
# OUT :
# REQ : Stardog running: 1. on port  5820
#       2. with --disable-security option during start
# SRC :
# NOTE:
# TODO:
###############################################################################
library(SPARQL)
# Query StardogTriple Store ----
endpoint <- "http://localhost:5820/CTDasRDFOnt/query"
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01:", "<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
# qd <- SPARQL(endpoint, queryOnt, ns=prefix)
qd <- SPARQL(endpoint, queryOnt)
resultsDF <- qd$results
# Post query processing
resultsDF <- resultsDF[complete.cases(resultsDF), ]  # remove blank rows.
resultsDF <- resultsDF[, c("s", "p", "o")]   # remove o.l, s.l
resultsDF <- unique(resultsDF)  # Remove dupes
# Create a function for this:
resultsDF$s <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$s)
# predicates
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$p)
resultsDF$p <- gsub("http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$p)
resultsDF$p <- gsub("https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$p)
# Remove the trailing >
resultsDF$s <- gsub(">", "", resultsDF$s)
resultsDF$p <- gsub(">", "", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/2004/02/skos/core#",
"skos:", resultsDF$p)
resultsDF$p <- gsub(">", "", resultsDF$p)
# Predicates
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$p)
resultsDF$p <- gsub("http://www.w3.org/2000/01/rdf-schema#",
"rdfs:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/2004/02/skos/core#",
"skos:", resultsDF$p)
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/2006/time#",
"time:", resultsDF$p)
# Remove the trailing >
resultsDF$s <- gsub(">", "", resultsDF$s)
resultsDF$p <- gsub(">", "", resultsDF$p)
resultsDF$p <- gsub("https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"code:", resultsDF$p)
# Objects
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2000/01/rdf-schema#",
"rdfs:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2004/02/skos/core#",
"skos:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$o)
resultsDF$o <- gsub("https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"code:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2006/time#",
"time:", resultsDF$o)
# Remove the trailing >
resultsDF$s <- gsub(">", "", resultsDF$s)
resultsDF$p <- gsub(">", "", resultsDF$p)
resultsDF$o <- gsub(">", "", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"code:", resultsDF$o)
resultsDF$o
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"code:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cd01p:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"custom:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2000/01/rdf-schema#",
"rdfs:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2004/02/skos/core#",
"skos:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2006/time#",
"time:", resultsDF$o)
# Remove the trailing >
resultsDF$s <- gsub(">", "", resultsDF$s)
resultsDF$o <- gsub(">", "", resultsDF$o)
resultsDF$p <- gsub(">", "", resultsDF$p)
resultsDF$o
###############################################################################
# FILE: Stardog-SPARQL-Simple.R
# DESC: Simple query to Stardog using SPARQL pkg
# SRC :
# IN  : triplestore database CTDasRDF-R
# OUT :
# REQ : Stardog running: 1. on port  5820
#       2. with --disable-security option during start
# SRC :
# NOTE:
# TODO:
###############################################################################
library(SPARQL)
# Query StardogTriple Store ----
endpoint <- "http://localhost:5820/CTDasRDFOnt/query"
queryOnt = paste0("
PREFIX cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>
PREFIX study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#>
PATHS
START ?s = cdiscpilot01:Person_1
END ?o
VIA ?p
")
# Or: ready prefixes in from prefixes.csv project file.
prefix <- c("cd01p",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cdiscpilot01", "<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#>",
"code",         "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"custom",       "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"owl",          "http://www.w3.org/2002/07/owl#",
"rdf",          "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdfs",         "http://www.w3.org/2000/01/rdf-schema#",
"sdtmterm",     "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/sdtm-terminology.rdf#",
"skos",         "http://www.w3.org/2004/02/skos/core#",
"study",        "https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"time",         "http://www.w3.org/2006/time#")
# qd <- SPARQL(endpoint, queryOnt, ns=prefix)
qd <- SPARQL(endpoint, queryOnt)
resultsDF <- qd$results
# Post query processing
resultsDF <- resultsDF[complete.cases(resultsDF), ]  # remove blank rows.
resultsDF <- resultsDF[, c("s", "p", "o")]   # remove o.l, s.l
resultsDF <- unique(resultsDF)  # Remove dupes
# Create a function for this:
resultsDF$s <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$s)
# Predicates
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$p)
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"code:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/2000/01/rdf-schema#",
"rdfs:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/2004/02/skos/core#",
"skos:", resultsDF$p)
resultsDF$p <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$p)
resultsDF$p <- gsub("<http://www.w3.org/2006/time#",
"time:", resultsDF$p)
# Objects
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#",
"cdiscpilot01:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#",
"code:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl",
"cd01p:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#",
"custom:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/1999/02/22-rdf-syntax-ns#",
"rdf:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2000/01/rdf-schema#",
"rdfs:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2004/02/skos/core#",
"skos:", resultsDF$o)
resultsDF$o <- gsub("<https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#",
"study:", resultsDF$o)
resultsDF$o <- gsub("<http://www.w3.org/2006/time#",
"time:", resultsDF$o)
# Remove the trailing >
resultsDF$s <- gsub(">", "", resultsDF$s)
resultsDF$p <- gsub(">", "", resultsDF$p)
resultsDF$o <- gsub(">", "", resultsDF$o)
head(resultsDF)
runApp('C:/_gitHub/CTDasRDF/r/validation/CollapsibleTree-Shiny.R')
runApp('C:/_gitHub/CTDasRDF/r/validation/CollapsibleTree-Shiny.R')
