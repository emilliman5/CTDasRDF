###############################################################################
# FILE: VS_mappings.ttl
# DESC: Stardog SMS Template file for mapping VS to graph.  
# REQ : 
# SRC : 
# IN  : CSV converted from VS.XPT, Subject 1015 only
# OUT : 
# NOTE: stardog-admin virtual import CTDasRDF VS_mappings.TTL VS_subset.csv
#  Export to TTL: stardog data export --format TURTLE CTDasRDF C:/temp/test.ttl
#
#  Conventions:  
#    Visit IRIs: 
#      a) cdiscpilot01 : compressed form of original value in visit field: visit_im_comp
#          Closer match to actual source data.
#      b) custom: and other externa ont files: CamelCaseShortened: visit_im_CCaseSh to match 
#          naming conventions in ontologies for classes, etc.
# TODO: 
###############################################################################

@prefix cd01p: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl#> .
@prefix cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#> .
@prefix code: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#> .
@prefix custom: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sdtmterm: <http://rdf.cdisc.org/sdtmterm#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .


# COMMENCE MAP
# -----------------------------------------------------------------------------
# Person_
# TODO: WIP
#      
# -----------------------------------------------------------------------------
cdiscpilot01:Person_{usubjid} 
  study:participatesIn cdiscpilot01:Visit{visit_im_comp}_{usubjid} ;
.

  # Visit ----
  # Example Objects: 
  #   VisitSCREENING1_01-701-1015

  # AssumeBodyPosition is a combination of the position and the prerequisite time
  #   in that position: STANDING+ After Standing for 1 minute
  #                     STANDING+ After Standing for 3 minutes
  #                     etc.
  # Hardcoding:  ActivityStatus_1 = CO(Complete)
   
  cdiscpilot01:Visit{visit_im_titleCSh}_{usubjid}
    rdf:type               custom:Visit{visit_im_titleCSh} ;
    study:hasPerformedDate cdiscpilot01:Date_{vsdtc_en} ;
  .

    # VisitDate
    cdiscpilot01:Date_{vsdtc_en} 
      rdf:type   study:VisitDate ;
    .

  # Visit Activity 
  cdiscpilot01:Visit{visit_im_titleCSh}Activity_{usubjid}
    rdf:type         owl:Class ;
    rdfs:subClassOf  custom:Visit{visit_im_titleCSh}Activity ;
    skos:prefLabel   "Visit {visit} Person {usubjid}"^^xsd:string ;
  .


#   # AssumeBodyPosition
#  cdiscpilot01:AssumeBodyPosition{vspos_im_CCase}_{usubjid} 
#    rdf:type             cdiscpilot01:Visit{visit_im_titleCSh}Activity_{usubjid};
#    rdf:type             custom:AssumeBodyPosition{vspos_im_CCase} ;
#    skos:prefLabel       "Assume {vspos_im_CCase} position"^^xsd:string ;   
#    study:activityStatus code:ActivityStatus_1 ;
#    study:hasDate        cdiscpilot01:Date_{#vsdtc} ;
#    study:hasStartRule   cdiscpilot01:StartRule{startRule_im}_{usubjid} ;
#    study:outcome        code:Vspos_{vspos} ;
#  .

    cdiscpilot01:{vstestcd_im_titleC}Outcome_{vsorres_en} 
      code:hasUnit code:Unit_{vsorresu} ;
      code:hasValue "{vsorres}"^^xsd:float;
      rdf:type study:{vstestcd_im_titleC}Outcome ;
       skos:prefLabel "{vsorres} {vsorresu}"^^xsd:string ;
    .
                #GUIDE
                #cdiscpilot01:WeightOutcome_1
                #  rdf:type study:WeightOutcome ;
                #  skos:prefLabel "119.0 LB"^^xsd:string ;
                #  code:hasUnit code:Unit_8 ; 
                #  code:hasValue "119.0"^^xsd:float ; #!! UNABLE TO ASSIGN TYPE!!



#    cdiscpilot01:Visit{visit_im_titleCSh}Activity_{usubjid}
#      rdf:type        owl:Class ;
#      skos:prefLabel  "Visit {visit} Person {usubjid}"^^xsd:string ;
#      rdfs:subClassOf custom:Visit{visit_im_titleCSh}Activity;
#   .

# TO HERE
# study:hasStartRule cdiscpilot01:StartRule{startRule_im}_{usubjid} ;
#  cdiscpilot01:StartRule{startRule_im}_{usubjid}
#    rdf:type       cd01p:{startRule_im} ;
#    skos:prefLabel "{usubjid} {visit} Start Rule {vstpt} "^^xsd:string ;
#  .

# ORIGINAL TRIPLES FOR SCREENING1_1
#cdiscpilot01:VisitScreening1_1
#  rdf:type custom:VisitScreening1 ;
#  study:activityStatus code:ActivityStatus_1 ;
#  study:hasPerformedDate cdiscpilot01:Date_19 ;
#  study:hasSubActivity cdiscpilot01:AssumeBodyPositionStanding_1 ;
#  study:hasSubActivity cdiscpilot01:AssumeBodyPositionSupine_1 ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25206_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25208_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25298_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25298_2> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25298_3> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25299_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25299_2> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25299_3> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25347_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C49676_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C49676_2> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C49676_3> ;
#.
    


#cdiscpilot01:AssumeBodyPositionStanding_1
#  rdf:type cdiscpilot01:VisitScreening1Activity_1 ;
#  rdf:type custom:AssumeBodyPositionStanding ;
#  skos:prefLabel "assume standing position"^^xsd:string ;
#  study:activityStatus code:ActivityStatus_1 ;
#  study:hasDate cdiscpilot01:Date_19 ;
#  study:hasStartRule cdiscpilot01:StartRuleLying5_1 ;
#  study:outcome <http://rdf.cdisc.org/sdtmterm#C71148.C62166> ;
#.

#cdiscpilot01:VisitScreening1Activity_1
#  rdf:type owl:Class ;
#  rdfs:subClassOf custom:VisitScreening1Activity ;
#  skos:prefLabel "Visit Screening 1 Person 1"^^xsd:string ;
