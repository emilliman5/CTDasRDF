###############################################################################
# FILE: VS_mappings.ttl
# DESC: Stardog SMS Template file for mapping VS to graph.  
# REQ : 
# SRC : 
# IN  : CSV converted from VS.XPT, Subject 1015 only
# OUT : 
# NOTE: stardog-admin virtual import CTDasRDF VS_mappings.TTL VS_subset.csv
#  Export to TTL: stardog data export --format TURTLE CTDasRDF C:/temp/test.ttl
#
# TODO: 
###############################################################################

@prefix cd01p: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01-protocol.ttl#> .
@prefix cdiscpilot01: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#> .
@prefix code: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/code.ttl#> .
@prefix custom: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/custom#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sdtmterm: <http://rdf.cdisc.org/sdtmterm#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix study: <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/study.ttl#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .


# COMMENCE MAP
# -----------------------------------------------------------------------------
# Person_
# TODO: WIP
#      
# -----------------------------------------------------------------------------
cdiscpilot01:Person_{usubjid} 
  study:participatesIn cdiscpilot01:Visit_{#visit}_{usubjid} ;
.

  # Visit ----
  # AssumeBodyPosition is a combination of the position and the prerequisite time
  #   in that position: STANDING+ After Standing for 1 minute
  #                     STANDING+ After Standing for 3 minutes
  #                     etc.
  # Hardcoding:  ActivityStatus_1 = CO(Complete)
   
  cdiscpilot01:Visit_{#visit}_{usubjid}
    rdf:type custom:Visit_{#visit} ;
    study:activityStatus code:ActivityStatus_1 ;
    study:hasPerformedDate cdiscpilot01:Date_{#vsdtc} ;
    # study:hasSubActivity cdiscpilot01:AssumeBodyPositionStanding_1 ;
    study:hasSubActivity cdiscpilot01:AssumeBodyPosition_{#vspos}_{#vstpt} ;
  .

# NEW TRIPLES
  # AssumeBodyPosition
  cdiscpilot01:AssumeBodyPosition_{#vspos}_{#vstpt}
    rdf:type cdiscpilot01:VisitActivity_{#visit}_{usubjid} ;
  .
  cdiscpilot01:VisitActivity_{#visit}_{usubjid}
    rdf:type owl:Class ;
   rdfs:subClassOf custom:VisitActivity{#visit};
   skos:prefLabel "Visit {visit} Person {usubjid}"^^xsd:string ;
  .

# ORIGINAL TRIPLES FOR SCREENING1_1
#cdiscpilot01:VisitScreening1_1
#  rdf:type custom:VisitScreening1 ;
#  study:activityStatus code:ActivityStatus_1 ;
#  study:hasPerformedDate cdiscpilot01:Date_19 ;
#  study:hasSubActivity cdiscpilot01:AssumeBodyPositionStanding_1 ;
#  study:hasSubActivity cdiscpilot01:AssumeBodyPositionSupine_1 ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25206_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25208_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25298_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25298_2> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25298_3> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25299_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25299_2> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25299_3> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C25347_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C49676_1> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C49676_2> ;
#  study:hasSubActivity <https://raw.githubusercontent.com/phuse-org/CTDasRDF/master/data/rdf/cdiscpilot01.ttl#C67153.C49676_3> ;
#.
    


#cdiscpilot01:AssumeBodyPositionStanding_1
#  rdf:type cdiscpilot01:VisitScreening1Activity_1 ;
#  rdf:type custom:AssumeBodyPositionStanding ;
#  skos:prefLabel "assume standing position"^^xsd:string ;
#  study:activityStatus code:ActivityStatus_1 ;
#  study:hasDate cdiscpilot01:Date_19 ;
#  study:hasStartRule cdiscpilot01:StartRuleLying5_1 ;
#  study:outcome <http://rdf.cdisc.org/sdtmterm#C71148.C62166> ;
#.

#cdiscpilot01:VisitScreening1Activity_1
#  rdf:type owl:Class ;
#  rdfs:subClassOf custom:VisitScreening1Activity ;
#  skos:prefLabel "Visit Screening 1 Person 1"^^xsd:string ;
